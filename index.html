<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Yorkshire Windows Showcase</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <style>
    :root { 
      --brand-blue: #002f54; 
      --brand-yellow: #fab51f; 
    }
    
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    
    html, body { 
      margin: 0; padding: 0; height: 100%; width: 100%; 
      overflow: hidden; background: white; font-family: 'Segoe UI', sans-serif;
    }

    /* THE SECURE GRID FRAME */
    body {
      display: grid;
      grid-template-rows: auto auto 1fr auto;
      height: 100dvh; /* Dynamic height to stay above mobile nav bars */
    }

    #lock-screen { 
        position: fixed; inset: 0; background: var(--brand-blue); z-index: 9999; 
        display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; 
    }

    /* HEADER: TRIMMED & LARGER LOGO */
    header { 
      background: var(--brand-blue); display: flex; 
      border-bottom: 4px solid var(--brand-yellow); height: 110px;
    }
    .h-side { flex: 1; display: flex; align-items: center; justify-content: center; color: white; }
    .h-center { background: white; flex: 3; display: flex; align-items: center; justify-content: center; }
    .h-logo { height: 100px; width: auto; object-fit: contain; }

    /* NAVIGATION */
    nav { background: var(--brand-yellow); display: flex; overflow-x: auto; -webkit-overflow-scrolling: touch; }
    nav button { background: none; border: none; color: var(--brand-blue); font-weight: 900; padding: 15px 18px; text-transform: uppercase; cursor: pointer; white-space: nowrap; font-size: 12px; }
    nav button.active { text-decoration: underline; text-underline-offset: 5px; }

    /* SCROLLABLE CONTENT AREA */
    main { overflow-y: auto; -webkit-overflow-scrolling: touch; background: white; }

    /* PERMANENT FOOTER BRANDS */
    footer { 
      background: white; border-top: 1px solid #eee; 
      display: flex; justify-content: space-around; align-items: center; 
      padding: 10px; height: 70px;
    }
    footer img { height: 35px; max-width: 60px; object-fit: contain; }

    /* OVERLAYS */
    .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 5000; display: none; flex-direction: column; }
    .close-btn { position: absolute; top: 40px; right: 20px; color: white; font-size: 40px; cursor: pointer; }
    .hidden { display: none !important; }
  </style>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

  <div id="lock-screen">
    <input type="password" id="pw" style="padding:15px; border-radius:10px; text-align:center;" placeholder="Enter 1234">
    <button onclick="unlock()" style="margin-top:15px; padding:15px 30px; background:var(--brand-yellow); border:none; border-radius:10px; font-weight:bold; color:var(--brand-blue);">UNLOCK SITE</button>
  </div>

  <header>
    <div class="h-side"></div>
    <div class="h-center"><img src="Logo/co-logo.png" class="h-logo"></div>
    <div class="h-side"><i data-lucide="user-cog" onclick="alert('Designer settings coming next')"></i></div>
  </header>

  <nav>
    <button onclick="loadSection('home')" id="btn-home">Home</button>
    <button onclick="loadSection('aboutme')" id="btn-aboutme">About Me</button>
    <button onclick="loadSection('gallery')" id="btn-gallery">Gallery</button>
    <button onclick="loadSection('funding')" id="btn-funding">Funding</button>
    <button onclick="loadSection('standards')" id="btn-standards">Standards</button>
    <button onclick="loadSection('brochures')" id="btn-brochures">Brochures</button>
  </nav>

  <main id="view-port"></main>

  <footer>
    <img src="Logo/clearview.png">
    <img src="Logo/planet.png">
    <img src="Logo/orion.png">
    <img src="Logo/trentvalley.png">
    <img src="Logo/yorkshire.png">
    <img src="Logo/westyorkshire.png">
  </footer>

  <div id="pdf-overlay" class="overlay">
    <span class="close-btn" onclick="closeOverlay('pdf-overlay')">&times;</span>
    <iframe id="pdf-frame" style="width:100%; height:100%; border:none; background:white;"></iframe>
  </div>

  <div id="video-overlay" class="overlay" style="justify-content:center; align-items:center;">
    <span class="close-btn" onclick="closeVideo()">&times;</span>
    <video id="video-player" controls style="max-width:90%; max-height:80%;"><source src="intro.mp4" type="video/mp4"></video>
  </div>

  <script>
    function unlock() {
      if(document.getElementById('pw').value === "1234") {
        document.getElementById('lock-screen').style.display = 'none';
        loadSection('home');
      }
    }

    async function loadSection(name) {
      const container = document.getElementById('view-port');
      try {
        const resp = await fetch(name + '.html');
        container.innerHTML = await resp.text();
        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        document.getElementById('btn-' + name).classList.add('active');
        lucide.createIcons();
        container.scrollTop = 0;
      } catch (e) { container.innerHTML = "<div style='padding:50px; text-align:center;'>Loading " + name + "...</div>"; }
    }

    // GLOBAL ACTIONS FOR PDF & VIDEO
    window.triggerVideo = function() { document.getElementById('video-overlay').style.display = 'flex'; document.getElementById('video-player').play(); };
    window.closeVideo = function() { document.getElementById('video-player').pause(); document.getElementById('video-overlay').style.display = 'none'; };
    window.triggerPDF = function(path) { document.getElementById('pdf-frame').src = path; document.getElementById('pdf-overlay').style.display = 'flex'; };
    window.closeOverlay = function(id) { document.getElementById(id).style.display = 'none'; document.getElementById('pdf-frame').src = ''; };

    // GALLERY LOGIC (Moved here so it always works)
    window.openSub = function(cat) {
        document.getElementById('album-list').classList.add('hidden');
        document.getElementById('photo-view').classList.remove('hidden');
        const grid = document.getElementById('photo-grid');
        grid.innerHTML = 'Searching for photos...';
        let found = 0;
        const extensions = ['.jpg', '.JPG', '.jpeg', '.png'];
        for(let i=1; i<=10; i++) {
            let num = i.toString().padStart(2, '0');
            extensions.forEach(ext => {
                let imgPath = `Gallery/${cat}/${num}${ext}`;
                let testImg = new Image();
                testImg.onload = function() {
                    if(found === 0) grid.innerHTML = '';
                    grid.innerHTML += `<img src="${imgPath}" style="width:100%; aspect-ratio:4/3; object-fit:cover; border-radius:10px;">`;
                    found++;
                };
                testImg.src = imgPath;
            });
        }
    };
    window.closeSub = function() {
        document.getElementById('album-list').classList.remove('hidden');
        document.getElementById('photo-view').classList.add('hidden');
    };
  </script>
</body>
</html>
