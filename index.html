<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CO Home Improvements Showcase</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="Logo/icon-180.png">
  
  <style>
    :root {
      --brand-blue: #002f54; 
      --brand-gold: #fab51f; 
      --brand-white: #ffffff;
      --safe-top: env(safe-area-inset-top, 20px);
      --safe-bottom: env(safe-area-inset-bottom, 20px);
    }

    body { 
      margin: 0; 
      font-family: 'Segoe UI', Roboto, sans-serif; 
      background-color: var(--brand-white); 
      height: 100vh; 
      display: flex; 
      flex-direction: column;
      overflow: hidden;
    }

    .hidden { display: none !important; }

    /* --- SHRUNK Top Bar (Blue) --- */
    header {
      padding: calc(var(--safe-top) + 5px) 10px 5px;
      text-align: center;
      background: var(--brand-blue);
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 110px;
    }

    #page-title {
      font-size: 90px; 
      font-weight: 900;
      color: var(--brand-white);
      text-transform: uppercase;
      margin: 0;
      line-height: 0.9;
      letter-spacing: -3px;
    }

    /* --- THIN Navigation Bar (Yellow) --- */
    nav {
      padding: 2px 5px; 
      background: var(--brand-gold);
      display: flex;
      justify-content: space-around;
      border-bottom: 2px solid rgba(0,0,0,0.1);
    }

    nav button {
      background: none;
      border: none;
      color: var(--brand-blue);
      font-weight: 900;
      font-size: 13px;
      text-transform: uppercase;
      padding: 6px 2px;
    }

    nav button.active {
      text-decoration: underline;
      text-underline-offset: 4px;
    }

    /* --- Main Content --- */
    main {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      position: relative;
    }

    .page-watermark {
      position: fixed;
      top: 55%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      opacity: 0.08;
      z-index: -1;
      pointer-events: none;
    }

    /* --- 3x2 Gallery Grid Layout --- */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr); 
      gap: 12px;
      padding-top: 5px;
    }

    .gallery-box {
      background: var(--brand-white);
      border: 1px solid #eee;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      cursor: pointer;
    }

    .gallery-box img {
      width: 100%;
      height: 110px; 
      object-fit: cover;
    }

    .gallery-box span {
      padding: 8px 2px;
      text-align: center;
      font-weight: 800;
      color: var(--brand-blue);
      text-transform: uppercase;
      font-size: 11px;
    }

    .content-card {
      background: var(--brand-white);
      border: 1px solid #ddd;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 20px;
      border-left: 10px solid var(--brand-gold);
      color: var(--brand-blue);
    }

    .content-card h3 {
      margin: 0 0 10px;
      font-size: 22px;
      text-transform: uppercase;
      font-weight: 900;
    }

    /* --- Footer Brand Logos --- */
    footer {
      background: var(--brand-white);
      padding: 15px 10px calc(var(--safe-bottom) + 15px);
      display: flex;
      justify-content: space-around;
      align-items: center;
      border-top: 2px solid #eee;
    }

    footer img { height: 85px; max-width: 130px; object-fit: contain; }

    #videoOverlay, #imageModal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: none; align-items: center; justify-content: center; }
    .close-btn { position: absolute; top: 40px; right: 20px; color: white; font-size: 50px; cursor: pointer; }
    #fullscreenImg { max-width: 98%; max-height: 90%; }
    video { width: 100%; height: 80%; background: #000; }
  </style>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body onload="initApp()">

  <header>
    <h1 id="page-title">PROMISE</h1>
  </header>

  <nav>
    <button onclick="navTo('promise')" id="btn-promise">Promise</button>
    <button onclick="navTo('gallery')" id="btn-gallery">Gallery</button>
    <button onclick="navTo('funding')" id="btn-funding">Funding</button>
    <button onclick="navTo('standards')" id="btn-standards">Standards</button>
    <button onclick="navTo('showroom')" id="btn-showroom">Showroom</button>
  </nav>

  <main>
    <img src="Logo/co-logo.png" class="page-watermark" alt="">

    <div id="promise" class="screen">
      <div class="content-card" style="text-align: center; border-left-color: var(--brand-blue);">
        <i data-lucide="play-circle" style="width: 100px; height: 100px; color: var(--brand-gold); margin: 0 auto 20px; cursor: pointer;" onclick="playVideo()"></i>
        <h3 style="text-transform:uppercase; font-weight:900;">Watch Our Transformation</h3>
        <p>Experience the care and attention we put into every home. We treat your home exactly as if it were our own.</p>
      </div>
    </div>

    <div id="gallery" class="screen hidden">
      <div id="albumList" class="gallery-grid">
        <div class="gallery-box" onclick="loadSubAlbums('Edwardian')">
          <img src="Gallery/Thumbnails/Edwardian.jpg"><span>Edwardian</span>
        </div>
        <div class="gallery-box" onclick="loadSubAlbums('Flat Roof')">
          <img src="Gallery/Thumbnails/Flat Roof.JPG"><span>Flat Roof</span>
        </div>
        <div class="gallery-box" onclick="loadSubAlbums('Gable End')">
          <img src="Gallery/Thumbnails/Gable End.jpeg"><span>Gable End</span>
        </div>
        <div class="gallery-box" onclick="loadSubAlbums('Leanto')">
          <img src="Gallery/Thumbnails/Leanto.JPG"><span>Leanto</span>
        </div>
        <div class="gallery-box" onclick="loadSubAlbums('Victorian')">
          <img src="Gallery/Thumbnails/Victorian.PNG"><span>Victorian</span>
        </div>
      </div>
      
      <div id="albumImages" class="hidden">
        <button onclick="loadAlbums()" style="color:white; background:var(--brand-blue); border:none; padding:12px 25px; margin-bottom:20px; border-radius:30px; font-weight:bold; cursor:pointer;">← BACK</button>
        <div id="imagesGrid" style="display:grid; grid-template-columns: repeat(3, 1fr); gap:12px;"></div>
      </div>
    </div>

    <div id="funding" class="screen hidden">
        <div class="content-card"><h3>Choice of Funding</h3><p>Applications are simple and decisions are typically delivered within 24 hours.</p></div>
    </div>
    <div id="standards" class="screen hidden">
        <div class="content-card" style="background:var(--brand-blue); color:white;"><h3>20 Year Guarantee</h3><p>Total piece of mind for your investment.</p></div>
    </div>
    <div id="showroom" class="screen hidden">
        <div class="content-card"><h3>Doncaster Showroom</h3><p>Unit 4 Brunel Trade Park, Doncaster, DN5 8PT.</p></div>
    </div>
  </main>

  <footer>
    <img src="Logo/clearview.png"><img src="Logo/planet.png"><img src="Logo/orion.png">
    <img src="Logo/trentvalley.png"><img src="Logo/yorkshire.png"><img src="Logo/westyorkshire.png">
  </footer>

  <div id="videoOverlay"><span class="close-btn" onclick="closeVideo()">&times;</span><video id="player" controls><source src="intro.mp4"></video></div>
  <div id="imageModal"><span class="close-btn" onclick="document.getElementById('imageModal').style.display='none'">&times;</span><img id="fullscreenImg"></div>

  <script>
    lucide.createIcons();
    const screens = ['promise','gallery','funding','standards','showroom'];
    const titles = { 'promise': 'PROMISE', 'gallery': 'GALLERY', 'funding': 'FINANCE', 'standards': 'STANDARDS', 'showroom': 'VISIT US' };
    
    function navTo(id) {
      screens.forEach(s => { document.getElementById(s).classList.add('hidden'); document.getElementById('btn-'+s).classList.remove('active'); });
      document.getElementById(id).classList.remove('hidden');
      document.getElementById('btn-'+id).classList.add('active');
      document.getElementById('page-title').innerText = titles[id];
      if(id === 'gallery') loadAlbums();
    }

    function playVideo() { document.getElementById('videoOverlay').style.display='flex'; document.getElementById('player').play(); }
    function closeVideo() { document.getElementById('player').pause(); document.getElementById('videoOverlay').style.display='none'; }

    function loadAlbums() {
      document.getElementById("albumList").classList.remove("hidden");
      document.getElementById("albumImages").classList.add("hidden");
    }

    // GALLERY LOGIC WITH EXTENSION CHECKER
    const galleryStructure = {
        "Edwardian": ["Edwardian Glass Roof", "Edwardian Solid Roof"],
        "Flat Roof": [],
        "Gable End": ["Gable Glass Roof", "Gable Solid Roof"],
        "Leanto": ["Leanto Glass Roof", "Leanto Solid Roof"],
        "Victorian": ["Victorian Glass Roof", "Victorian Solid Roof"]
    };

    function loadSubAlbums(folder) {
        const subs = galleryStructure[folder];
        if (subs.length === 0) {
            loadImages(`Gallery/${folder}`);
            return;
        }
        const list = document.getElementById("albumList");
        list.innerHTML = `<button onclick="loadAlbums()" style="color:white; background:var(--brand-blue); border:none; padding:12px 25px; margin-bottom:20px; border-radius:30px; font-weight:bold;">← BACK</button>`;
        subs.forEach(s => {
            const d = document.createElement("div");
            d.className = "content-card";
            d.innerHTML = `<h3>${s}</h3>`;
            d.onclick = () => loadImages(`Gallery/${folder}/${s}`);
            list.appendChild(d);
        });
    }

    function loadImages(path) {
        document.getElementById("albumList").classList.add("hidden");
        document.getElementById("albumImages").classList.remove("hidden");
        const grid = document.getElementById("imagesGrid"); grid.innerHTML = "";
        
        let i = 1;
        const extensions = ['.jpg', '.JPG', '.jpeg', '.png', '.PNG'];

        function tryLoad(index) {
            let extIndex = 0;
            function checkNextExt() {
                if (extIndex >= extensions.length) return;
                const src = `${path}/${index.toString().padStart(2, '0')}${extensions[extIndex]}`;
                const img = new Image();
                img.onload = function() {
                    const t = document.createElement("img");
                    t.src = src; t.style.width = "100%"; t.style.borderRadius = "12px";
                    t.onclick = function() {
                        document.getElementById('fullscreenImg').src = src;
                        document.getElementById('imageModal').style.display = 'flex';
                    };
                    grid.appendChild(t);
                    tryLoad(index + 1);
                };
                img.onerror = function() {
                    extIndex++;
                    checkNextExt();
                };
                img.src = src;
            }
            checkNextExt();
        }
        tryLoad(1);
    }
    function initApp() { navTo('promise'); }
  </script>
</body>
</html>